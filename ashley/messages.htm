<!DOCTYPE html>
<html>
    <head>
        <title>Ashley Messages</title>
        <link rel="stylesheet" href="css/mvp.css">
        <link rel="stylesheet" href="css/site.css">
    </head>
    <body>
        <script src="../scripts/html_tools.js"></script>
        <script src="../scripts/string_tools.js"></script>
        <script>

            function BadRando() {
                const date = new Date();
                const salty = date.getMilliseconds() + 1;
                const hour = date.getHours();
                const dayNum = date.getDay();
                const month = date.getMonth() + 1;
                const yearNum = date.getFullYear();
                const rndSeed = (dayNum * month * yearNum * salty) + hour + salty;
                const isWeekend = dayNum === 0 || dayNum === 6;

                this.isMorning = hour < 12;
                this.isAfternoon = hour >= 12 && hour < 17;
                this.isEvening = hour >= 17;
                
                //Terms of endearment for the bedtime message.
                //Ensures three unique terms are used.
                //Yes, it could be an array/collection. It's not.
                //I have my reasons, you have yours.
                let usedTerm0 = '';
                let usedTerm1 = '';
                let usedTerm2 = '';

                function rnd(denom){
                    const ri = (rndSeed / denom) * 1000007003;
                    const result = ri - (Math.floor(ri));
                    return result;
                }

                this.getGoodMorning = () => {
                    switch (dayNum) {
                        case 0:
                        case 2:
                        case 5:
                            return `Good morning gorgeous.`;
                        default:
                            return `Good morning beautiful.`;
                    }
                };

                this.getILoveYou = () => {
                    const rnd1 = rnd(49205839);
                    if (Math.floor(rnd1 * 4) === 1){
                        const rnd2 = rnd(49290583);
                        const phrases = [
                            `I love you *so* much.`,
                            `I love you dearly.`,
                            `I love you immensely.`,
                            `I love you forever.`,
                        ];
                        return phrases[Math.floor(rnd2 * phrases.length)];
                    }
                    return `I love you.`;
                };

                this.getQuestions = () => {
                    let m = 14935804;
                    let msg = ``;
                    //1: how are you feeling today variations
                    const howFeeling = [
                        `How are you feeling today babe?`,
                        `How are you feeling today baby girl?`,
                        `How is my princess feeling today?`,
                        `How are you feeling today babe?`,
                        `How are you feeling today babe?`,
                        `How are you feeling today baby girl?`,
                    ];
                    msg += howFeeling[Math.floor(rnd(m++) * howFeeling.length)];
                    //2: how was your morning variations
                    const morning = [
                        `How has your morning been so far?`,
                        `How was your morning?`,
                        `How's the morning been treating you?`,
                        `How did your morning go?`,
                    ];
                    msg += ' ' + morning[Math.floor(rnd(m++) * morning.length)];
                    //3: up to 1 optional question about class, work, kaj, life, etc.
                    if (Math.floor(rnd(m++) * 5) > 2){
                        const optional = [];
                        optional.push(`How is Kaj doing today?`);
                        if (!isWeekend) {
                            optional.push(`How has class been today?`);
                            optional.push(`How is class treating you?`);
                            optional.push(`How have classes been going?`);
                            optional.push(`How is class going?`);
                        }
                        optional.push(`Have you done anything interesting yet today?`);
                        optional.push(`Anything fun going on today?`);
                        if (isWeekend) {
                            optional.push(`Any plans today?`);
                            optional.push(`What plans do you have today?`);
                            optional.push(`Did you get breakfast with your friend this morning?`);
                        }
                        optional.push(`How has work been?`);
                        optional.push(`How has work been going?`);
                        msg += ' ' + optional[Math.floor(rnd(m++) * optional.length)];
                    }
                    return msg;
                };

                this.getAudioClipQuestion = () => {
                    let m = 20759314;
                    const options = [
                        'Silly',
                        'Sweet',
                        'Salty',
                        'Spicy',
                        'Bitter',
                        'Oily',
                    ];
                    const reorderedOptions = [];
                    let msg = '';
                    let listOptions = '';
                    while (options.length > 0) {
                        const opt = options.splice(Math.floor(rnd(m++) * options.length), 1)[0];
                        reorderedOptions.push(opt);
                        if (options.length > 0) {
                            listOptions += opt.toLowerCase() + ', ';
                        }
                        else {
                            listOptions += `or ${opt.toLowerCase()}`;
                        }
                    }
                    const individualOptionQuestions = reorderedOptions.map(o => `${o}?`).join(' ');
                    const aOrAn = listOptions.indexOf('o') === 0 ? 'an' : 'a';

                    if (Math.floor(rnd(m++) * 10) % 3 === 0) {
                        const single = [
                            `For your audio clip this evening would you like something ${listOptions}?`,
                            `Would you like ${aOrAn} ${listOptions} audio clip this evening?`,
                            `Are you in the mood for something ${listOptions} this evening?`,
                        ];
                        msg = single[Math.floor(rnd(m++) * single.length)];
                    }
                    else {
                        //two sentence options
                        const opening = [
                            `What kind of clip are you in the mood for this evening babe?`,
                            `What kind of audio clip would you like?`,
                            `How will you take your evening audio clip tonight?`,
                            `What kind of audio clip are you in the mood for?`,
                            `What *flavor* of audio clip shall I serve for you tonight princess?`,
                            `What kind of audio clip would you like this evening babe?`,
                        ];
                        const ending = [
                            `${individualOptionQuestions}`,
                            `${capitalizeFirstLetter(listOptions)}?`,
                            `Something ${listOptions}?`,
                        ];

                        msg = `${opening[Math.floor(rnd(m++) * opening.length)]} ${ending[Math.floor(rnd(m++) * ending.length)]}`;
                    }

                    if (Math.floor(rnd(m++) * 10) % 3 > 0) {
                        if (Math.floor(rnd(m++) * 10) % 2 === 0) {
                            msg += ' ðŸ˜˜';
                        }
                        else {
                            msg += ' ðŸ¥°';
                        }
                    }

                    return msg;
                };

                this.getBedtimeTitles = () => {
                    let m = 14598314;
                    const firstWord = [
                        'Oh',
                        'My',
                        'Oh my',
                    ];
                    const descriptors = [
                        'Dear',
                        'Beloved',
                        'Precious',
                        'Sweet',
                        'Dazzling',
                        'Wonderful',
                        'Beautiful',
                        'Spectacular',
                        'Delightful',
                        'Sexy',
                        'Amazing',
                        'Incredible',
                        'Stunning',
                        'Fantastic',
                        'Hot',
                    ];
                    const mostUpgrade = {
                        'Dear': 'Dearest',
                        'Beloved': 'Most beloved',
                        'Precious': 'Most precious',
                        'Sweet': 'Sweetest',
                        'Dazzling': 'Most dazzling',
                        'Wonderful': 'Most wonderful',
                        'Beautiful': 'Most beautiful',
                        'Spectacular': 'Most spectacular',
                        'Delightful': 'Most delightful',
                        'Sexy': 'Sexiest',
                        'Amazing': 'Most amazing',
                        'Incredible': 'Most incredible',
                        'Stunning': 'Most stunning',
                        'Fantastic': 'Most fantastic',
                        'Hot': 'Hottest',
                    };
                    const endearment = [
                        'Tonia',
                        'princess',
                        'baby girl',
                        'best friend',
                    ];
                    //Remove used terms of endearment.
                    if (usedTerm1.length > 0 && endearment.indexOf(usedTerm1) > -1) {
                        endearment.splice(endearment.indexOf(usedTerm1), 1);
                    }
                    if (usedTerm2.length > 0 && endearment.indexOf(usedTerm2) > -1) {
                        endearment.splice(endearment.indexOf(usedTerm2), 1);
                    }

                    //get the descriptors
                    const desc = [];
                    let n = 0;
                    do {
                        let d = descriptors.splice(Math.floor(rnd(m++) * descriptors.length), 1)[0];
                        if (Math.floor(rnd(m++) * 67) > 50 && mostUpgrade.hasOwnProperty(d)) {
                            d = mostUpgrade[d];
                        }
                        if (n > 0) {
                            d = d.toLowerCase();
                        }
                        desc.push(d);
                    } while ((Math.floor(rnd(m++) * 4) > n++));

                    //if only two desc, joining with a , is optional
                    let descChain = '';
                    if (desc.length == 2 && Math.floor(rnd(m++) * 100) % 4 === 0) {
                        descChain = desc.join(' ');
                    }
                    else {
                        descChain = desc.join(', ');
                    }

                    if (Math.floor(rnd(m++) * 100) % 7 > 0) {
                        //pick a first word
                        descChain = `${firstWord[Math.floor(rnd(m++) * firstWord.length)]} ${descChain.toLowerCase()}`;
                    }
                    usedTerm0 = endearment[Math.floor(rnd(m++) * endearment.length)];
                    return `${descChain} ${usedTerm0},`;
                };

                this.getGoldenShipOpening = () => {
                    let m = 23459236;
                    const endearment = [
                        'Princess',
                        'Baby girl',
                        'Babe',
                    ];
                    const endearmentTerm = endearment[Math.floor(rnd(m++) * endearment.length)];
                    const goldenStarTerms = [
                        'Your golden ship',
                        'Your magnificent golden ship',
                        'Your beautiful golden ship',
                        'Your spectacular golden ship',
                        'Your beautiful ship made of magical gold',
                    ];
                    const goldenTerm = goldenStarTerms[Math.floor(rnd(m++) * goldenStarTerms.length)];
                    const phrases = [
                        `${goldenTerm} awaits.`,
                        `${endearmentTerm}, the Golden Star is ready for boarding.`,
                        `${goldenTerm} is ready for you, ${endearmentTerm.toLowerCase()}.`,
                        `${goldenTerm} bobs quietly at the docks, waiting for its princess.`,
                        `${goldenTerm} is ready.`,
                        `The Golden Star is ready for boarding, ${endearmentTerm.toLowerCase()}.`,
                        `${endearmentTerm}, ${goldenTerm.toLowerCase()} is ready for boarding.`,
                        `${goldenTerm} is ready for adventure.`,
                        `The Golden Star is ready for boarding.`,
                        `${goldenTerm} awaits its princess.`,
                        `${goldenTerm} is ready for boarding.`,
                        `The Golden Star is ready for its princess to board.`,
                        `${goldenTerm} bobs quietly at the docks, waiting for you, ${endearmentTerm.toLowerCase()}.`,
                        `${goldenTerm} is ready to board.`,
                        `I have prepared ${goldenTerm.toLowerCase()} for you, ${endearmentTerm.toLowerCase()}.`,
                        `${goldenTerm} is ready for its princess.`,
                    ];
                    return phrases[Math.floor(rnd(m++) * phrases.length)];
                };

                this.getGoodnightOpening = () => {
                    let m = 314592907;
                    const endearment = [
                        'Tonia',
                        'princess',
                        'baby girl',
                        'babe',
                    ];
                    //Remove used term of endearment.
                    if (usedTerm0.length > 0 && endearment.indexOf(usedTerm0) > -1) {
                        endearment.splice(endearment.indexOf(usedTerm0), 1);
                    }

                    usedTerm1 = endearment.splice(Math.floor(rnd(m++) * endearment.length), 1)[0];
                    usedTerm2 = endearment.splice(Math.floor(rnd(m++) * endearment.length), 1)[0];
                    if (Math.floor(rnd(m++) * 10) % 2 === 0) {
                        return `Sweet dreams ${usedTerm1}. Goodnight ${usedTerm2}.`;
                    }
                    return `Goodnight ${usedTerm1}. Sweet dreams ${usedTerm2}.`;
                };
            }

            function Builder() {
                const r = new BadRando();

                this.buildMorningMessage = () => {
                    const message = `${r.getGoodMorning()} ðŸ˜ ${r.getILoveYou()} ðŸ¥°\n\n[my dreams and how I'm feeling]\n\n${r.getQuestions()} ðŸ˜˜`;
                    const textArea = createElement('textarea', {'style': 'width: 512px; height: 128px; margin:16px auto;'}, message);
                    return makeDetail(`Good Morning Message`, textArea, r.isMorning);
                };

                this.buildAudioClipMessage = () => {
                    const message = r.getAudioClipQuestion();
                    const textArea = createElement('textarea', {'style': 'width: 512px; height: 64px; margin:16px auto;'}, message);
                    return makeDetail(`Audio Clip Message`, textArea, r.isAfternoon);
                };

                this.buildGoodnightMessage = () => {
                    const message = `${r.getBedtimeTitles()} [mini love letter]\n\n${r.getGoldenShipOpening()} [golden ship notes]\n\n${r.getGoodnightOpening()} [goodnight sweetness] ðŸ˜˜`;
                    const textArea = createElement('textarea', {'style': 'width: 512px; height: 256px; margin:16px auto;'}, message);
                    return makeDetail(`Goodnight Message`, textArea, r.isEvening);
                };
                
                //TODO: tools for installments?
            }

            const builder = new Builder();
            //TODO: prettier formatting (center div container, etc.)
            const container = createElement('div', {'style': 'width:600px;height:100%;margin:0px auto;display:flex;flex-wrap:wrap;flex-direction:column;'}, null);
            container.appendChild(createElement('h1', {}, `Messaging Tools`));
            container.appendChild(builder.buildMorningMessage());
            container.appendChild(builder.buildAudioClipMessage());
            container.appendChild(builder.buildGoodnightMessage());
            document.body.appendChild(container);
        </script>
    </body>
</html>